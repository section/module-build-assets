# GO Handler

The GO Handler carries out the following functions : 
- Set up the configuration files required by the module after testing the configuration.
- Start the server to listen on port 80 according to the module contract.
- Connect to the message bus to recieve messages to update the module.
- Reload the server in case there are changes to the module configuration. 

### Directory Structure : 

```
.
├── all_test.go
├── configGenerator.go
├── configGenerator_test.go
├── go.mod
├── go.sum
├── kubernetes.go
├── main.go
├── must.go
├── resolvConf.go
├── resolvConf_test.go
└── util.go
```

- **main.go** : Defines the entrypoints for module image and other helper methods to help set up the module configuration.
- **kubernetes.go** : 
  - Contains the default entrypoint for the module.
  - Sets up the module configuration.
  - Starts the nginx server.
  - Connects to the redis message bus to receive update messages.
  
- **configGenerator.go** : Uses the configuration template file : /example-module/src/environment_variables.lua.gotemplate
and the configuration submitted by the user running the module to generate the final configuration used by the module.
- **configGenerator_test.go** : Test the configuration generated by the handler.
- **all_test.go** : Helper methods used by all tests.

- **resolvConf.go** : Helper methods to generate the nginx resolv configuration file.
- **resolvConf_test.go** : Helper methods to test the generated resolv configuration file.

- **must.go** : Helper methods for functions which must happen for the module to be set up.
- **util.go** : More helper methods that did not belong in any other files.

- **go.mod, go.sum** : Files required to use go modules.
